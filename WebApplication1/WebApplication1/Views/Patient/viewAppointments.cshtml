@model IEnumerable<WebApplication1.Appointment>

@{
    ViewBag.Title = "viewAppointments";
}

<br />
<br />

@if (Session.Count == 0 || ((User)Session["User"]).role_id != 4)
{
    <p class="alert-danger container">You need to Login first to access this data</p>
    @Html.ActionLink("Login Here", "LoginPage", "home");
}
else
{


    <h2>viewAppointments</h2>

    <div class="Logout">
        @Html.ActionLink("Log Out", "Logout", "Admin", new { aria = "" }, new { @style = "color:white" })
    </div>

    if (Model.Count() > 0)
    {
        <table class="table-bordered table-striped">
            <thead>
                <tr>
                    <th><label>Appointment Id</label></th>
                    <th><label>Appointment date</label></th>
                    <th><label>Appointment time</label></th>
                    <th><label>Is Approved</label></th>
                    <th><label>Specialist</label></th>
                </tr>
            </thead>

            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.appointment_id</td>
                        <td>@item.appointmentDate</td>
                        <td>@item.appointmentTime</td>
                        <td>@item.isApproved</td>
                        <td>
                            @{
                                WebApplication1.Data_Access.UserDataAccess user = new WebApplication1.Data_Access.UserDataAccess();
                                var doctor = user.GetUserById((int)item.userId);
                            }
                            @doctor.specialization
                        </td>
                    </tr>
                }
            </tbody>

        </table>

        <hr />
    }
    else
    {
        <div>Oops...You do not have any appointment scheduled</div>
        <hr />
        @Html.ActionLink("Click Here to create an appointment", "Index")
    }
    <hr />

    <div>
        @Html.ActionLink("Back to main page", "Index")
    </div>
}


